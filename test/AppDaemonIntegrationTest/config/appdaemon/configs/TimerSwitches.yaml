global_modules:
  - expression

timer_switch_1:
  module: timer_switch
  class: TimerSwitch
  dependencies:
    - locker
    - enabler1
    - switch1
  sensor: binary_sensor.start
  targets:
    - switch1
  delay: 0.1
  time: 0.1

switch1:
  module: auto_switch
  class: AutoSwitch
  dependencies: locker
  target: input_boolean.test_switch1
  reentrant: true

enabler1:
  module: enabler
  class: ExpressionEnabler
  dependencies:
    - locker
    - switch_enabler
  global_dependencies:
    - expression
  expr: e.switch_enabler

timer_switch_2:
  module: timer_switch
  class: TimerSwitch
  dependencies:
    - locker
    - enabler2
    - switch2
  sensor: binary_sensor.start
  targets:
    - switch2
  delay: 0.05
  time: 0.1

switch2:
  module: auto_switch
  class: AutoSwitch
  dependencies: locker
  target: input_boolean.test_switch2
  reentrant: true

enabler2:
  module: enabler
  class: ExpressionEnabler
  dependencies:
    - locker
    - switch_enabler
  global_dependencies:
    - expression
  expr: not e.switch_enabler

